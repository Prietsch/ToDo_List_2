// ... (o JavaScript anterior permanece o mesmo, apenas adicionar estas funções no final da classe TodoApp)

// Adicionar estas funções à classe TodoApp:

// Atualizar data atual
updateCurrentDate() {
    const now = new Date();
    const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
    };
    const dateString = now.toLocaleDateString('pt-BR', options);
    document.getElementById('currentDate').textContent = dateString;
}

// Configurar tabs
setupTabs() {
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabPanes = document.querySelectorAll('.tab-pane');
    
    tabBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const tabName = btn.getAttribute('data-tab');
            
            // Atualizar botões
            tabBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // Atualizar panes
            tabPanes.forEach(pane => pane.classList.remove('active'));
            document.getElementById(`${tabName}-tasks`).classList.add('active');
        });
    });
}

// Atualizar contadores das tabs
updateTabCounters() {
    const pendingTasks = this.tasks.filter(task => !task.completed);
    const completedTasks = this.tasks.filter(task => task.completed);
    
    document.getElementById('pendingTabCount').textContent = pendingTasks.length;
    document.getElementById('completedTabCount').textContent = completedTasks.length;
}

// No método init(), adicionar:
init() {
    this.loadFromLocalStorage();
    this.setupEventListeners();
    this.setupTabs(); // ← Adicionar esta linha
    this.updateCurrentDate(); // ← Adicionar esta linha
    this.renderTasks();
    this.saveState();
}

// No método renderTasks(), adicionar no final:
renderTasks() {
    // ... código existente ...
    
    // Atualizar contadores das tabs
    this.updateTabCounters();
}

// Configurar modal personalizado
setupModal() {
    const modal = document.getElementById('editTaskModal');
    const closeBtn = document.getElementById('closeEditModal');
    const cancelBtn = document.getElementById('cancelEdit');
    
    const closeModal = () => {
        modal.classList.remove('active');
    };
    
    closeBtn.addEventListener('click', closeModal);
    cancelBtn.addEventListener('click', closeModal);
    
    // Fechar modal clicando fora
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            closeModal();
        }
    });
}

// No setupEventListeners(), adicionar:
setupEventListeners() {
    // ... listeners existentes ...
    
    this.setupModal(); // ← Adicionar esta linha
}

// Modificar o método editTask para usar o modal personalizado:
editTask(taskId) {
    const task = this.tasks.find(t => t.id === taskId);
    if (task) {
        document.getElementById('editTaskId').value = task.id;
        document.getElementById('editTaskTitle').value = task.title;
        document.getElementById('editTaskResponsible').value = task.responsible;
        document.getElementById('editTaskStartDate').value = task.startDate;
        document.getElementById('editTaskEndDate').value = task.endDate;
        document.getElementById('editTaskPriority').value = task.priority;
        document.getElementById('editTaskDescription').value = task.description;
        document.getElementById('editTaskObservations').value = task.observations;

        // Abrir modal personalizado
        document.getElementById('editTaskModal').classList.add('active');
    }
}

// Modificar o método saveEditedTask para fechar o modal personalizado:
saveEditedTask() {
    const taskId = parseInt(document.getElementById('editTaskId').value);
    const task = this.tasks.find(t => t.id === taskId);
    
    if (task) {
        this.saveState();
        
        // ... resto do código existente ...
        
        // Fechar modal personalizado
        document.getElementById('editTaskModal').classList.remove('active');
        this.showAlert('Tarefa atualizada com sucesso!', 'success');
    }
}
